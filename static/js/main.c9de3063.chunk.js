(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{60:function(e,t,n){"use strict";n.r(t);var c,s=n(1),i=n(0),r=n.n(i),a=n(15),o=n.n(a),d=n(9),j=n(3),l=function(){return Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{children:"Hacker news app"}),Object(s.jsx)("nav",{children:Object(s.jsx)("ul",{children:Object(s.jsx)(d.c,{to:"/hacker-news",activeClassName:"",children:"News List"})})})]})},u=function(){return Object(s.jsxs)("footer",{children:[Object(s.jsx)("address",{children:"Author: Melnikov Aleksei"}),Object(s.jsxs)("nav",{children:[Object(s.jsx)("h3",{children:"Contacts:"}),Object(s.jsxs)("ul",{children:[Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"https://github.com/MelnikovAleksei",target:"_blank",rel:"noreferrer",children:"GitHub"})}),Object(s.jsx)("li",{children:Object(s.jsx)("a",{href:"https://www.facebook.com/meln.aleksei",target:"_blank",rel:"noreferrer",children:"Facebook"})})]})]})]})},h=function(){return Object(s.jsxs)("main",{children:[Object(s.jsx)("h3",{children:"404 Page not found"}),Object(s.jsx)(d.b,{to:"/",children:"Back to news list"})]})},b=n(7),O=function(e){var t=e.isLoadingData,n=e.title;return Object(s.jsx)("h3",{children:t?"Loading...":n})},x=function(e){var t=e.children,n=e.isLoadingData,c=e.text;return Object(s.jsxs)("p",{children:[n?"Loading...":c,t]})},f=function(e){var t=e.isLoadingData,n=e.text;return Object(s.jsx)("address",{children:t?"Loading...":n})},g=n(28),w=n(29),m=new(function(){function e(t){Object(g.a)(this,e),this._url=t.baseUrl,this._headers=t.headers}return Object(w.a)(e,[{key:"_handleOriginalResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getItemById",value:function(e){return fetch("".concat(this._url,"/v0/item/").concat(e,".json"),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}},{key:"getNewStoriesIds",value:function(){return fetch("".concat(this._url,'/v0/newstories.json?print=pretty&orderBy="$key"&limitToFirst=').concat(100),{method:"GET",headers:this._headers}).then(this._handleOriginalResponse)}}]),e}())({baseUrl:"https://hacker-news.firebaseio.com",headers:{"Content-Type":"application/json"}}),p=function(e){return new Date(1e3*e).toLocaleString("en-us",{hour12:!1})},k=function(e){var t=e.children,n=e.id,c=r.a.useState({}),i=Object(b.a)(c,2),a=i[0],o=i[1],j=r.a.useState(!1),l=Object(b.a)(j,2),u=l[0],h=l[1];return r.a.useEffect((function(){h(!0),m.getItemById(n).then((function(e){o(e)}),(function(e){console.log(e)})).finally((function(){h(!1)}))}),[n]),Object(s.jsxs)("article",{children:[Object(s.jsx)("header",{children:Object(s.jsx)(O,{isLoadingData:u,title:a.title})}),Object(s.jsx)(x,{isLoadingData:u,text:"The story's score: ".concat(a.score)}),Object(s.jsxs)("footer",{children:[Object(s.jsx)(f,{isLoadingData:u,text:"By: ".concat(a.by)}),Object(s.jsx)(x,{isLoadingData:u,text:"Date: ",children:Object(s.jsx)("time",{children:u?"Loading...":p(a.time)})}),u?null:Object(s.jsx)(d.b,{to:"/news/".concat(a.id),children:"Go to this news"}),t]})]})},v=function(e){var t=e.id;return Object(s.jsx)("li",{children:Object(s.jsx)(k,{id:t})})},y=function(e){var t=e.data,n=r.a.useState(null),c=Object(b.a)(n,2),i=c[0],a=c[1];return r.a.useEffect((function(){var e=t.map((function(e){return Object(s.jsx)(v,{id:e},e)}));a(e)}),[t]),Object(s.jsx)("ul",{children:i})},L=function(e){var t=e.url,n=e.text;return Object(s.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:n})},I=n(30),D=n.n(I),N=new(0,n(54).AllHtmlEntities),B=function(e){var t=e.data,n=r.a.useState({}),c=Object(b.a)(n,2),i=c[0],a=c[1],o=r.a.useState(null),d=Object(b.a)(o,2),j=d[0],l=d[1],u=r.a.useState(!1),h=Object(b.a)(u,2),O=h[0],x=h[1];r.a.useEffect((function(){x(!0),m.getItemById(t).then((function(e){a(e)}),(function(e){console.log(e)})).finally((function(){x(!1)}))}),[t]);var f,g={paddingTop:5,paddingBottom:5};return i.deleted?Object(s.jsx)("li",{style:g,children:"Comment has been deleted"}):Object(s.jsxs)("li",{style:g,children:[O&&Object(s.jsx)("p",{children:"Loading..."}),i.kids&&Object(s.jsxs)("p",{children:[i.kids.length," nested comment('s)"]}),Object(s.jsxs)("address",{children:["by: ",O?"Loading...":i.by]}),Object(s.jsxs)("p",{children:["Date: ",Object(s.jsx)("time",{children:O?"Loading...":p(i.time)})]}),Object(s.jsx)("h4",{children:"Comment text:"}),O?Object(s.jsx)("p",{children:"Loading..."}):D()((f=i.text,N.decode(f))),i.kids?Object(s.jsx)("button",{type:"button",onClick:function(){var e=Object(s.jsx)(S,{data:i.kids});l(e)},disabled:!i.kids,children:"Load nested comments"}):null,j]})},S=function(e){var t=e.data;return Object(s.jsx)("ul",{style:{paddingTop:20,paddingBottom:20},children:t.map((function(e){return Object(s.jsx)(B,{data:e},e)}))})},_=function(e){var t=e.text,n=e.isLoading,c=e.onClick;return Object(s.jsx)("button",{type:"button",onClick:c,disabled:"loading"===n||!0===n,children:"loading"===n?"Loading...":t})},C=function(e){var t=e.match.params.newsId,n=r.a.useState({}),c=Object(b.a)(n,2),i=c[0],a=c[1],o=r.a.useState(!1),j=Object(b.a)(o,2),l=j[0],u=j[1],h=r.a.useCallback((function(){u(!0),m.getItemById(t).then((function(e){a(e)}),(function(e){console.log(e)})).finally((function(){u(!1)}))}),[t]);r.a.useEffect((function(){h()}),[h]);return Object(s.jsxs)("section",{children:[Object(s.jsx)(_,{text:"Update news",isLoading:l,onClick:function(){h()}}),Object(s.jsxs)("article",{children:[Object(s.jsxs)("header",{children:[Object(s.jsx)("h3",{children:i.title}),Object(s.jsx)(L,{url:i.url,text:"Link to news"})]}),Object(s.jsx)(x,{isLoadingData:l,text:"Date: ",children:Object(s.jsx)("time",{children:l?"Loading...":p(i.time)})}),Object(s.jsx)(f,{isLoadingData:l,text:"By: ".concat(i.by)}),Object(s.jsx)(x,{isLoadingData:l,text:i.kids&&i.descendants>0?i.descendants:"0",children:" comment('s)"}),Object(s.jsx)(d.b,{to:"/hacker-news",children:"Back to news list"}),i.kids&&Object(s.jsx)(S,{data:i.kids})]})]})},E=n(11),T=n(17),A=n(23),G=n.n(A),R=n(32),U=n(14),H=Object(U.b)("news/fetchNewsIds",Object(R.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getNewStoriesIds();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),M=Object(U.c)({name:"news",initialState:{newsIds:[],statusNewsIds:"idle",errorNewsIds:null},reducers:{},extraReducers:(c={},Object(T.a)(c,H.pending,(function(e,t){e.statusNewsIds="loading"})),Object(T.a)(c,H.fulfilled,(function(e,t){e.statusNewsIds="succeeded",e.newsIds=t.payload})),Object(T.a)(c,H.rejected,(function(e,t){e.statusNewsIds="failed",e.errorNewsIds=t.error.message})),c)}).reducer,F=function(e){return e.news.newsIds},J=function(e){return e.news.errorNewsIds},P=function(e){return e.news.statusNewsIds};var W=function(){var e=Object(E.b)(),t=Object(E.c)(F),n=Object(E.c)(P),c=Object(E.c)(J);function i(){e(H())}return r.a.useEffect((function(){var t=setTimeout((function(){e(H())}),6e4);return"idle"===n&&e(H()),function(){clearTimeout(t)}}),[e,n]),Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)(l,{}),Object(s.jsxs)(j.c,{children:[Object(s.jsx)(j.a,{exact:!0,path:"/hacker-news",render:function(){return Object(s.jsx)("main",{children:Object(s.jsxs)("section",{children:[Object(s.jsx)(_,{text:"Update the list",isLoading:n,onClick:i}),c&&Object(s.jsx)("p",{children:"newsIdsError"}),Object(s.jsx)(y,{data:t})]})})}}),Object(s.jsx)(j.a,{exact:!0,path:"/news/:newsId",component:C}),Object(s.jsx)(j.a,{path:"*",children:Object(s.jsx)(h,{})})]}),Object(s.jsx)(u,{})]})},$=Object(U.a)({reducer:{news:M}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(E.a,{store:$,children:Object(s.jsx)(d.a,{children:Object(s.jsx)(W,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.c9de3063.chunk.js.map